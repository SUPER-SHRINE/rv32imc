# RV32I Base Integer Instruction Set

RV32I 命令セットの定義と動作について記述します。

## LUI (Load Upper Immediate)

LUI (load upper immediate) は U 形式の命令で、20 ビットの即値をレジスタの上位 20 ビットにロードし、下位 12 ビットを 0 で埋めます。

### 命令フォーマット
```
| 31      12 | 11  7 | 6    0 |
|:----------:|:-----:|:------:|
| imm[31:12] | rd    | opcode |
```
- **imm[31:12]**: 20ビットの即値
- **rd**: 書き込み先レジスタ
- **opcode**: `0110111`

### 動作

```
x[rd] = imm << 12
```

### 説明

LUI 命令は、32 ビット定数の上位 20 ビットを構築するために使用されます。AUIPC 命令と組み合わせることで、PC 相対のアドレスを生成したり、ADDI 命令と組み合わせることで任意の 32 ビット定数を生成したりできます。

## AUIPC (Add Upper Immediate to PC)

AUIPC (add upper immediate to pc) は U 形式の命令で、20 ビットの即値を上位 20 ビットに配置し、下位 12 ビットを 0 で埋めた 32 ビットの値を作成し、それを現在の PC に加算して結果をレジスタに格納します。

### 命令フォーマット
```
| 31      12 | 11  7 | 6    0 |
|:----------:|:-----:|:------:|
| imm[31:12] | rd    | opcode |
```
- **imm[31:12]**: 20ビットの即値
- **rd**: 書き込み先レジスタ
- **opcode**: `0010111`

### 動作

```
x[rd] = pc + (imm << 12)
```

### 説明

AUIPC 命令は、PC 相対のアドレスを生成するために使用されます。AUIPC の後に JALR やロード/ストア命令（ADDI 等のオフセットを伴うもの）を続けることで、現在の PC から ±2 GiB の範囲内にある任意のアドレスへアクセスしたり、制御を移したりすることが可能になります。
